{% extends 'base.html' %}

{% block title %}Upload File{% endblock %}

{% block content %}
    <form method="get" action="{% url 'dashboard' %}">
        <label for="year">Select Year:</label>
        <select name="year" id="year" onchange="this.form.submit()">
            <option value="" {% if not selected_year %}selected{% endif %}>All Years</option>
            {% for year in years %}
                <option value="{{ year }}" {% if year|stringformat:"s" == selected_year %}selected{% endif %}>{{ year }}</option>
            {% endfor %}
        </select>
    </form>
    <table>
        <thead>
            <tr>
                <th>Make</th>
                <th>Model</th>
                <th>Year</th>
                <th>Inventory Count</th>
                <th>Sales Count</th>
            </tr>
        </thead>
        <tbody>
            {% for car in cars %}
                <tr>
                    <td>{{ car.make }}</td>
                    <td>{{ car.model }}</td>
                    <td>{{ car.year }}</td>
                    <td>{{ car.inventory_count }}</td>
                    <td>{{ car.sales_count }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}
